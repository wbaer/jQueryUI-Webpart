/// <reference types="webpack" />
/// <reference types="node" />
/// <reference types="es6-promise" />
import * as gulp from 'gulp';
import { GulpTask } from '@microsoft/gulp-core-build';
import { compiler as webpackCompiler } from 'webpack';
import { IClientSideComponentManifest } from '@microsoft/sp-module-interfaces';
import { IConfigEntry, IBundleEntry } from './configureWebpack/ConfigureWebpackTask';
import { IDeployEntry } from './copyAssets/CopyAssetsTask';
import { IExternalProjectMap } from './configureWebpack/ExternalsProcessor';
export interface IConfigJson {
    /**
     * The entries specified in config.json
     */
    entries?: IConfigEntry[];
    /**
     * The localized resources specified in config.json
     */
    localizedResources?: {
        [key: string]: string;
    };
    /**
     * The externals specified in config.json
     */
    externals?: {
        [name: string]: string | INonAMDExternalModuleConfig;
    };
}
/**
 * Configuration for a non-AMD external module
 */
export interface INonAMDExternalModuleConfig {
    /**
     * The path or URL to the bundled external non-AMD file
     */
    path: string;
    /**
     * The name of the global variable where an non-AMD dependency drops its exports
     */
    globalName: string;
    /**
     * The names of the non-AMD dependencies for this project
     */
    globalDependencies: string[];
}
/**
 * Common properties that are shared between tasks.
 */
export interface IOdspGulpTaskProperties extends IConfigJson {
    /**
     * The webpack stats object for the last-run webpack task.
     */
    webpackStats?: webpackCompiler.Stats;
    /**
     * The webpack stats object for the base bundle.
     */
    initialWebpackStats?: webpackCompiler.Stats;
    /**
     * Memoization of the manifest objects.
     */
    manifests?: {
        [key: string]: IClientSideComponentManifest;
    };
    /**
     * Data describing each bundled entry.
     */
    bundleEntries?: IBundleEntry[];
    /**
     * Data describing each deployed entry
     */
    deployEntries?: IDeployEntry[];
    /**
     * Files discovered for the localized resources specified in config.json
     */
    discoveredLocalizedResources?: {
        [key: string]: ILocaleMap;
    };
    /**
     * The URL to which the manifests.js file has been deployed after running dev-deploy.
     */
    devDeployUrl?: string;
    /**
     * A list of externals that were specified in config.json that were later bundled.
     */
    bundledExternals?: string[];
    /**
     * A map of linked externals.
     */
    linkedExternals?: IExternalProjectMap;
    /**
     * The name to use in the "library" property of the webpack configuration.
     */
    webpackLibraryName?: string;
    /**
     * If true, webpackLibraryName is the temporary name used in the webpack config when we have multiple
     *  entrypoints. In the post-webpack steps, we need to update the library name to the standard
     *  format in the "define(<name>, ..." function.
     */
    webpackLibraryNameIsTemporary?: boolean;
}
export interface ILocaleMap {
    [locale: string]: string;
}
export default class OdspGulpTask<TASK_CONFIG> extends GulpTask<TASK_CONFIG> {
    private _outputDirectory;
    executeTask(gulp: gulp.Gulp, completeCallback: (error?: string) => void): NodeJS.ReadWriteStream | Promise<any>;
    readonly properties: IOdspGulpTaskProperties;
    readonly outputDirectory: string;
    getManifest(manifestPath: string): IClientSideComponentManifest;
    getPackageVersion(): string;
    getChecksum(data: any): string;
}
