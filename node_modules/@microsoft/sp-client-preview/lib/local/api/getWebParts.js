"use strict";
var fs = require('fs');
var path = require('path');
var lodash = require("@microsoft/sp-lodash-subset");
var rootDir = process.cwd();
function getWebParts(req, res) {
    'use strict';
    var manifests = fs.readdirSync(path.join(rootDir, 'dist'))
        .filter(function (filename) {
        return filename.toLowerCase().endsWith('.manifest.json');
    });
    var manifestMap = {};
    manifests.forEach(function (manifest) {
        lodash.merge(manifestMap, JSON.parse(fs.readFileSync(path.join(rootDir, 'dist/' + manifest), 'utf8')));
    });
    res.json(manifestMap);
}
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = getWebParts;
