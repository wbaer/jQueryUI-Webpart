"use strict";
var sp_core_library_1 = require("@microsoft/sp-core-library");
var GENERIC_ITEM_ID = '00000000-0000-0000-0000-000000000000';
var LINK_PREVIEW_ITEM_ID = '6410b3b6-d440-4663-8744-378976dc041e_0';
var VIDEO_ITEM_ID = '275c0095-a77e-4f6d-a2a0-6a7626911518_0';
var FEATURED_ITEM_IDS = [
    'd1d91016-032f-456d-98a4-721247c305e8_0',
    'b7dd04e1-19ce-4b24-9132-b60a1c2b910d_0',
    VIDEO_ITEM_ID,
    '490d7c76-1824-45b2-9de3-676421c997fa_0',
    'daf0b71c-6de8-4ef7-b511-faae7c388708_0' 
];
var LINK_PREVIEW_FLIGHT = 904;
var ToolBoxItemClassifier = (function () {
    function ToolBoxItemClassifier() {
        var _this = this;
        this._toolBoxItemIdToPropsMap = new Map();
        FEATURED_ITEM_IDS.forEach(function (id) {
            if (id === VIDEO_ITEM_ID && sp_core_library_1._SPFlight.isEnabled(LINK_PREVIEW_FLIGHT)) {
                id = LINK_PREVIEW_ITEM_ID;
            }
            _this._toolBoxItemIdToPropsMap.set(id, []);
        });
        this._toolBoxItemIdToPropsMap.set(GENERIC_ITEM_ID, []);
    }
    ToolBoxItemClassifier.prototype.registerItem = function (itemId, itemProps) {
        var registeredItemProps = this._toolBoxItemIdToPropsMap.get(itemId);
        if (Array.isArray(registeredItemProps)) {
            registeredItemProps.push(itemProps);
        }
        else {
            this._toolBoxItemIdToPropsMap.get(GENERIC_ITEM_ID).push(itemProps);
        }
    };
    ToolBoxItemClassifier.prototype.classify = function (isFeatured, sortPredicate) {
        var toolBoxItemProps = [];
        if (isFeatured) {
            this._toolBoxItemIdToPropsMap.forEach(function (items, id) {
                if (id !== GENERIC_ITEM_ID && items.length > 0) {
                    toolBoxItemProps.push(items[0]);
                }
            });
        }
        else {
            toolBoxItemProps = this._toolBoxItemIdToPropsMap.get(GENERIC_ITEM_ID);
        }
        if (Boolean(sortPredicate)) {
            toolBoxItemProps = toolBoxItemProps.sort(sortPredicate);
        }
        return toolBoxItemProps;
    };
    return ToolBoxItemClassifier;
}());
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = ToolBoxItemClassifier;
