{"version":3,"sources":["components/Breadcrumb/Breadcrumb.tsx"],"names":[],"mappings":"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","file":"components/Breadcrumb/Breadcrumb.js","sourcesContent":["import * as React from 'react';\r\nimport {\r\n  BaseComponent,\r\n  autobind,\r\n  css,\r\n  getId,\r\n  getRTL\r\n} from '../../Utilities';\r\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\r\nimport { ContextualMenu } from '../../ContextualMenu';\r\nimport { Link } from '../../Link';\r\nimport { IBreadcrumbProps, IBreadcrumbItem } from './Breadcrumb.Props';\r\nimport { DirectionalHint } from '../../common/DirectionalHint';\r\nimport './Breadcrumb.scss';\r\n\r\nexport interface IBreadcrumbState {\r\n  isOverflowOpen: boolean;\r\n  overflowAnchor?: HTMLElement;\r\n  renderedItems?: IBreadcrumbItem[];\r\n  renderedOverflowItems?: IBreadcrumbItem[];\r\n}\r\n\r\nconst OVERFLOW_KEY = 'overflow';\r\nconst OVERFLOW_WIDTH = 44;\r\n\r\nexport class Breadcrumb extends BaseComponent<IBreadcrumbProps, IBreadcrumbState> {\r\n  public static defaultProps: IBreadcrumbProps = {\r\n    items: [],\r\n    maxDisplayedItems: 999\r\n  };\r\n\r\n  public refs: {\r\n    [key: string]: React.ReactInstance;\r\n    renderingArea: HTMLElement;\r\n  };\r\n\r\n  private _breadcrumbItemWidths: { [key: string]: number };\r\n  private _id: string;\r\n\r\n  constructor(props: IBreadcrumbProps) {\r\n    super(props);\r\n\r\n    this._id = getId('Breadcrumb');\r\n    this.state = this._getStateFromProps(props);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this._updateItemMeasurements();\r\n    this._updateRenderedItems();\r\n\r\n    this._events.on(window, 'resize', this._updateRenderedItems);\r\n  }\r\n\r\n  public componentWillReceiveProps(nextProps: IBreadcrumbProps) {\r\n    this.setState(this._getStateFromProps(nextProps));\r\n    this._breadcrumbItemWidths = null;\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: IBreadcrumbProps, prevStates: IBreadcrumbState) {\r\n    if (!this._breadcrumbItemWidths) {\r\n      this._updateItemMeasurements();\r\n      this._updateRenderedItems();\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    let { className } = this.props;\r\n    let { isOverflowOpen, overflowAnchor, renderedItems, renderedOverflowItems } = this.state;\r\n    let overflowMenuId = this._id + '-overflow';\r\n\r\n    return (\r\n      <div className={ css('ms-Breadcrumb', className) } ref='renderingArea'>\r\n        <FocusZone direction={ FocusZoneDirection.horizontal }>\r\n          <ul className='ms-Breadcrumb-list'>\r\n            { renderedOverflowItems && renderedOverflowItems.length ? (\r\n              <li className='ms-Breadcrumb-overflow' key={ OVERFLOW_KEY } ref={ OVERFLOW_KEY }>\r\n                <div className='ms-Breadcrumb-overflowButton ms-Icon ms-Icon--More'\r\n                  onClick={ this._onOverflowClicked }\r\n                  data-is-focusable={ true }\r\n                  role='button'\r\n                  aria-haspopup='true'\r\n                  aria-owns={ isOverflowOpen ? overflowMenuId : null } />\r\n                <i className={ css('ms-Breadcrumb-chevron ms-Icon', getRTL() ? 'ms-Icon--ChevronLeft' : 'ms-Icon--ChevronRight') }></i>\r\n              </li>\r\n            ) : (null) }\r\n            { renderedItems.map(\r\n              (item, index) => (\r\n                <li className='ms-Breadcrumb-listItem' key={ item.key || String(index) } ref={ item.key || String(index) }>\r\n                  { this._renderItem(item) }\r\n                  <i className={ css('ms-Breadcrumb-chevron ms-Icon', getRTL() ? 'ms-Icon--ChevronLeft' : 'ms-Icon--ChevronRight') }></i>\r\n                </li>\r\n              )) }\r\n          </ul>\r\n        </FocusZone>\r\n        { isOverflowOpen ? (\r\n          <ContextualMenu\r\n            targetElement={ overflowAnchor }\r\n            isBeakVisible={ true }\r\n            items={ renderedOverflowItems.map(\r\n              (item, index) => ({\r\n                name: item.text,\r\n                key: item.key,\r\n                onClick: item.onClick ? this._onBreadcrumbClicked.bind(this, item) : null,\r\n                href: item.href\r\n              })\r\n            ) }\r\n            id={ overflowMenuId }\r\n            directionalHint={ DirectionalHint.bottomLeftEdge }\r\n            onDismiss={ this._onOverflowDismissed } />\r\n        ) : (null) }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private _renderItem(item: IBreadcrumbItem) {\r\n    if (item.onClick || item.href) {\r\n      return (\r\n        <Link\r\n          className='ms-Breadcrumb-itemLink'\r\n          href={ item.href }\r\n          onClick={ this._onBreadcrumbClicked.bind(this, item) }>\r\n          { item.text }\r\n        </Link>\r\n      );\r\n    } else {\r\n      return (\r\n        <span className='ms-Breadcrumb-item'>\r\n          { item.text }\r\n        </span>\r\n      );\r\n    }\r\n  }\r\n\r\n  @autobind\r\n  private _onOverflowClicked(ev: React.MouseEvent<HTMLElement>) {\r\n    this.setState({\r\n      'isOverflowOpen': !this.state.isOverflowOpen,\r\n      'overflowAnchor': ev.currentTarget as HTMLElement\r\n    });\r\n  }\r\n\r\n  @autobind\r\n  private _onOverflowDismissed(ev: MouseEvent) {\r\n    this.setState({\r\n      'isOverflowOpen': false,\r\n      'overflowAnchor': null\r\n    });\r\n  }\r\n\r\n  @autobind\r\n  private _onBreadcrumbClicked(item: IBreadcrumbItem, ev: React.MouseEvent<HTMLElement>) {\r\n    if (item.onClick) {\r\n      item.onClick(ev, item);\r\n    }\r\n    this.setState({\r\n      'isOverflowOpen': false\r\n    });\r\n  }\r\n\r\n  private _updateItemMeasurements() {\r\n    let { items } = this.props;\r\n\r\n    if (!this._breadcrumbItemWidths) {\r\n      this._breadcrumbItemWidths = {};\r\n    }\r\n\r\n    for (let i = 0; i < items.length; i++) {\r\n      let item = items[i];\r\n\r\n      if (!this._breadcrumbItemWidths[item.key]) {\r\n        let el = this.refs[item.key] as HTMLElement;\r\n\r\n        this._breadcrumbItemWidths[item.key] = el.getBoundingClientRect().width;\r\n      }\r\n    }\r\n  }\r\n\r\n  private _updateRenderedItems() {\r\n    let { items, maxDisplayedItems } = this.props;\r\n    let renderingArea = this.refs.renderingArea;\r\n    let renderedItems = [];\r\n    let renderedOverflowItems = [].concat(items);\r\n    let consumedWidth = 0;\r\n\r\n    let style = window.getComputedStyle(renderingArea);\r\n    let availableWidth = renderingArea.clientWidth - parseInt(style.marginLeft, 10) - parseInt(style.marginRight, 10);\r\n\r\n    availableWidth -= OVERFLOW_WIDTH;\r\n\r\n    let i;\r\n    let minIndex = Math.max(0, renderedOverflowItems.length - maxDisplayedItems);\r\n\r\n    for (i = renderedOverflowItems.length - 1; i >= minIndex; i--) {\r\n      let item = renderedOverflowItems[i];\r\n      let itemWidth = this._breadcrumbItemWidths[item.key];\r\n\r\n      if ((consumedWidth + itemWidth) >= availableWidth) {\r\n        break;\r\n      } else {\r\n        consumedWidth += itemWidth;\r\n      }\r\n    }\r\n\r\n    renderedItems = renderedOverflowItems.splice(i + 1);\r\n\r\n    this.setState({\r\n      isOverflowOpen: this.state.isOverflowOpen,\r\n      overflowAnchor: this.state.overflowAnchor,\r\n      renderedItems: renderedItems,\r\n      renderedOverflowItems: renderedOverflowItems,\r\n    });\r\n  }\r\n\r\n  private _getStateFromProps(nextProps: IBreadcrumbProps) {\r\n    return {\r\n      isOverflowOpen: false,\r\n      overflowAnchor: null,\r\n      renderedItems: nextProps.items || [],\r\n      renderedOverflowItems: null\r\n    };\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}