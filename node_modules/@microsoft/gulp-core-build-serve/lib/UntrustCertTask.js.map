{"version":3,"sources":["UntrustCertTask.ts"],"names":[],"mappings":";;;;;;AAAA,8DAAsD;AAItD;;;;;;GAMG;AACH;IAA6C,mCAAY;IAAzD;QAAA,qEAsBC;QArBQ,UAAI,GAAW,cAAc,CAAC;;IAqBvC,CAAC;IAnBQ,qCAAW,GAAlB,UAAmB,IAAe,EAAE,gBAA0C;QAC5E,oBAAoB;QACpB,IAAM,gBAAgB,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC,OAAO,CAAC;QACvD,IAAA,iEAAkB,CAA+B;QACzD,mBAAmB;QAEnB,IAAM,iBAAiB,GAAY,kBAAkB,CAAC,IAAI,CAAC,CAAC;QAC5D,IAAM,gBAAgB,GAAyB,gBAAgB,CAAC,QAAQ,CAAC;QAEzE,kCAAkC;QAClC,gBAAgB,CAAC,eAAe,GAAG,SAAS,CAAC;QAC7C,gBAAgB,CAAC,OAAO,GAAG,SAAS,CAAC;QAErC,EAAE,CAAC,CAAC,iBAAiB,CAAC,CAAC,CAAC;YACtB,gBAAgB,EAAE,CAAC;QACrB,CAAC;QAAC,IAAI,CAAC,CAAC;YACN,gBAAgB,CAAC,+BAA+B,CAAC,CAAC;QACpD,CAAC;IACH,CAAC;IACH,sBAAC;AAAD,CAtBA,AAsBC,CAtB4C,0BAAQ,GAsBpD","file":"UntrustCertTask.js","sourcesContent":["import { GulpTask } from '@microsoft/gulp-core-build';\r\nimport * as gulp from 'gulp';\r\nimport CertificateStoreType from './CertificateStore';\r\n\r\n/**\r\n * On Windows, this task removes the certificate with the expected serial number from the user's\r\n *  root certification authorities list. On macOS, it finds the SHA signature of the certificate\r\n *  with the expected serial number and then removes that certificate from the keychain. On\r\n *  other platforms, the user must untrust the certificate manually. On all platforms,\r\n *  the certificate and private key are deleted from the user's home directory.\r\n */\r\nexport default class UntrustCertTask extends GulpTask<{}> {\r\n  public name: string = 'untrust-cert';\r\n\r\n  public executeTask(gulp: gulp.Gulp, completeCallback: (error?: string) => void): void {\r\n    /* tslint:disable */\r\n    const CertificateStore = require('./CertificateStore').default;\r\n    const { untrustCertificate } = require('./certificates');\r\n    /* tslint:enable */\r\n\r\n    const untrustCertResult: boolean = untrustCertificate(this);\r\n    const certificateStore: CertificateStoreType = CertificateStore.instance;\r\n\r\n    // Clear out the certificate store\r\n    certificateStore.certificateData = undefined;\r\n    certificateStore.keyData = undefined;\r\n\r\n    if (untrustCertResult) {\r\n      completeCallback();\r\n    } else {\r\n      completeCallback('Error untrusting certificate.');\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"..\\src"}