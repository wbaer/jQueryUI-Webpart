{"version":3,"sources":["packageSolution/packageSolution/xmlGenerators/createRelationshipsXml.ts"],"names":[],"mappings":"AAAA;;;;;GAKG;;AAEH,mCAAmC;AAEnC,2BAA6B;AAC7B,kCAAoC;AAGpC,iDAA4C;AAC5C,+DAA0D;AAO1D,IAAI,cAAc,GAAW,CAAC,CAAC;AAE/B,qCAAqC,GAAkB;IACrD,EAAE,CAAC,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;QAC1B,GAAG,CAAC,MAAM,GAAG,GAAG,GAAG,GAAG,CAAC,MAAM,CAAC;IAChC,CAAC;IACD,MAAM,CAAC;QACL,YAAY,EAAE;YACZ;gBACE,KAAK,EAAE;oBACL,IAAI,EAAE,oEAAkE,GAAG,CAAC,IAAM;oBAClF,MAAM,EAAE,GAAG,CAAC,MAAM;oBAClB,EAAE,EAAE,MAAI,cAAc,EAAI;iBAC3B;aACF;SACF;KACF,CAAC;AACJ,CAAC;AAED,uCAAuC,IAAqB;IAC1D,MAAM,CAAC;QACL,aAAa,EAAE;YACb;gBACE,KAAK,EAAE;oBACL,KAAK,EAAE,8DAA8D;iBACtE;aACe;SACnB,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,UAAC,GAAkB,IAAK,OAAA,2BAA2B,CAAC,GAAG,CAAC,EAAhC,CAAgC,CAAC,CAAC;KAC7E,CAAC;AACJ,CAAC;AAED,gCAA+C,eAAuB,EAAE,IAAqB;IAC3F,IAAM,IAAI,GAAW,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;IACpD,IAAM,MAAM,GAAW,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;IAErD,MAAM,CAAC;QACL,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,mBAAS,CAAC,UAAU,EAAE,IAAI,GAAG,mBAAS,CAAC,OAAO,CAAC;QACjF,GAAG,EAAE,YAAY,CAAC,6BAA6B,CAAC,IAAI,CAAC,EAAE,8BAAoB,CAAC;KAC7E,CAAC;AACJ,CAAC;;AARD,yCAQC","file":"packageSolution/packageSolution/xmlGenerators/createRelationshipsXml.js","sourcesContent":["/**\r\n * @file createComponentXml.ts\r\n * @Copyright (c) Microsoft Corporation.  All rights reserved.\r\n *\r\n * Creates XML definitions for the relationships files\r\n */\r\n\r\n/// <reference path='./xml.d.ts' />\r\n\r\nimport * as path from 'path';\r\nimport * as XmlGenerator from 'xml';\r\n\r\nimport IXml from '../models/packageXml/IXml';\r\nimport constants from '../config/constants';\r\nimport serializationOptions from './serializationOptions';\r\n\r\nexport interface IRelationship {\r\n  type?: string;\r\n  target?: string;\r\n}\r\n\r\nlet relationshipId: number = 0;\r\n\r\nfunction relationshipToXmlDefinition(rel: IRelationship): Object {\r\n  if (rel.target[0] !== '/') {\r\n    rel.target = '/' + rel.target;\r\n  }\r\n  return {\r\n    Relationship: [\r\n      {\r\n        _attr: {\r\n          Type: `http://schemas.microsoft.com/sharepoint/2012/app/relationships/${rel.type}`,\r\n          Target: rel.target,\r\n          Id: `r${relationshipId++}`\r\n        }\r\n      }\r\n    ]\r\n  };\r\n}\r\n\r\nfunction createRelationshipsDefinition(rels: IRelationship[]): Object {\r\n  return {\r\n    Relationships: [\r\n      {\r\n        _attr: {\r\n          xmlns: 'http://schemas.openxmlformats.org/package/2006/relationships'\r\n        }\r\n      } as IRelationship\r\n    ].concat(rels.map((rel: IRelationship) => relationshipToXmlDefinition(rel)))\r\n  };\r\n}\r\n\r\nexport default function createRelationshipsXml(currentFilename: string, rels: IRelationship[]): IXml {\r\n  const file: string = path.basename(currentFilename);\r\n  const folder: string = path.dirname(currentFilename);\r\n\r\n  return {\r\n    filename: path.posix.join(folder, constants.RelsFolder, file + constants.RelsXml),\r\n    xml: XmlGenerator(createRelationshipsDefinition(rels), serializationOptions)\r\n  };\r\n}\r\n"],"sourceRoot":"..\\..\\..\\..\\src"}