{"version":3,"sources":["utilities/selection/SelectionZone.tsx"],"names":[],"mappings":"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","file":"utilities/selection/SelectionZone.js","sourcesContent":["import * as React from 'react';\r\nimport {\r\n  BaseComponent,\r\n  KeyCodes,\r\n  autobind,\r\n  findScrollableParent,\r\n  getParent,\r\n  getDocument,\r\n  getWindow,\r\n  isElementTabbable\r\n} from '../../Utilities';\r\nimport { SelectionLayout } from './SelectionLayout';\r\nimport {\r\n  ISelection,\r\n  ISelectionLayout,\r\n  SelectionDirection,\r\n  SelectionMode\r\n} from './interfaces';\r\n\r\n// Selection definitions:\r\n//\r\n// Anchor index: the point from which a range selection starts.\r\n// Focus index: the point from which layout movement originates from.\r\n//\r\n// These two can differ. Tests:\r\n//\r\n// If you start at index 5\r\n// Shift click to index 10\r\n//    The focus is 10, the anchor is 5.\r\n// If you shift click at index 0\r\n//    The anchor remains at 5, the items between 0 and 5 are selected and everything else is cleared.\r\n// If you click index 8\r\n//    The anchor and focus are set to 8.\r\n\r\nconst SELECTION_DISABLED_ATTRIBUTE_NAME = 'data-selection-disabled';\r\nconst SELECTION_INDEX_ATTRIBUTE_NAME = 'data-selection-index';\r\nconst SELECTION_TOGGLE_ATTRIBUTE_NAME = 'data-selection-toggle';\r\nconst SELECTION_INVOKE_ATTRIBUTE_NAME = 'data-selection-invoke';\r\nconst SELECTALL_TOGGLE_ALL_ATTRIBUTE_NAME = 'data-selection-all-toggle';\r\n\r\nexport interface ISelectionZoneProps extends React.Props<SelectionZone> {\r\n  selection: ISelection;\r\n  layout?: ISelectionLayout;\r\n  selectionMode?: SelectionMode;\r\n  selectionPreservedOnEmptyClick?: boolean;\r\n  isSelectedOnFocus?: boolean;\r\n  onItemInvoked?: (item?: any, index?: number, ev?: Event) => void;\r\n  onItemContextMenu?: (item?: any, index?: number, ev?: Event) => void;\r\n}\r\n\r\nexport class SelectionZone extends BaseComponent<ISelectionZoneProps, {}> {\r\n  public static defaultProps = {\r\n    layout: new SelectionLayout(SelectionDirection.vertical),\r\n    isMultiSelectEnabled: true,\r\n    isSelectedOnFocus: true,\r\n    selectionMode: SelectionMode.multiple\r\n  };\r\n\r\n  public refs: {\r\n    [key: string]: React.ReactInstance,\r\n    root: HTMLElement\r\n  };\r\n\r\n  private _isCtrlPressed: boolean;\r\n  private _isShiftPressed: boolean;\r\n  private _isMetaPressed: boolean;\r\n  private _shouldIgnoreFocus: boolean;\r\n\r\n  public componentDidMount() {\r\n    let win = getWindow(this.refs.root);\r\n    let scrollElement = findScrollableParent(this.refs.root);\r\n\r\n    // Track the latest modifier keys globally.\r\n    this._events.on(win, 'keydown keyup', this._updateModifiers);\r\n    this._events.on(scrollElement, 'click', this._tryClearOnEmptyClick);\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <div\r\n        className='ms-SelectionZone'\r\n        ref='root'\r\n        onKeyDown={ this._onKeyDown }\r\n        onMouseDown={ this._onMouseDown }\r\n        onClick={ this._onClick }\r\n        onDoubleClick={ this._onDoubleClick }\r\n        onContextMenu={ this._onContextMenu }\r\n        { ...{\r\n          onMouseDownCapture: this.ignoreNextFocus,\r\n          onFocusCapture: this._onFocus\r\n        } }\r\n      >\r\n        { this.props.children }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  /**\r\n   * In some cases, the consuming scenario requires to set focus on a row without having SelectionZone\r\n   * react to the event. Note that focus events in IE <= 11 will occur asynchronously after .focus() has\r\n   * been called on an element, so we need a flag to store the idea that we will bypass the \"next\"\r\n   * focus event that occurs. This method does that.\r\n   */\r\n  @autobind\r\n  public ignoreNextFocus() {\r\n    this._shouldIgnoreFocus = true;\r\n  }\r\n\r\n  /**\r\n   * When we focus an item, for single/multi select scenarios, we should try to select it immediately\r\n   * as long as the focus did not originate from a mouse down/touch event. For those cases, we handle them\r\n   * specially.\r\n   */\r\n  @autobind\r\n  private _onFocus(ev: React.FocusEvent<HTMLElement>) {\r\n    let target = ev.target as HTMLElement;\r\n    let { selection, selectionMode } = this.props;\r\n    let isToggleModifierPressed = this._isCtrlPressed || this._isMetaPressed;\r\n\r\n    if (this._shouldIgnoreFocus || selectionMode === SelectionMode.none) {\r\n      this._shouldIgnoreFocus = false;\r\n      return;\r\n    }\r\n\r\n    let isToggle = this._hasAttribute(target, SELECTION_TOGGLE_ATTRIBUTE_NAME);\r\n    let itemRoot = this._findItemRoot(target);\r\n\r\n    if (!isToggle && itemRoot) {\r\n      let index = this._getItemIndex(itemRoot);\r\n\r\n      if (isToggleModifierPressed) {\r\n        // set anchor only.\r\n        selection.setIndexSelected(index, selection.isIndexSelected(index), true);\r\n      } else {\r\n        this._onItemSurfaceClick(ev, index);\r\n      }\r\n    }\r\n  }\r\n\r\n  @autobind\r\n  private _onMouseDown(ev: React.MouseEvent<HTMLElement>) {\r\n    this._updateModifiers(ev);\r\n\r\n    let target = ev.target as HTMLElement;\r\n    let itemRoot = this._findItemRoot(target);\r\n\r\n    while (target !== this.refs.root) {\r\n      if (this._hasAttribute(target, SELECTALL_TOGGLE_ALL_ATTRIBUTE_NAME)) {\r\n        break;\r\n      } else if (itemRoot) {\r\n        if (this._hasAttribute(target, SELECTION_TOGGLE_ATTRIBUTE_NAME)) {\r\n          break;\r\n        } else if (this._hasAttribute(target, SELECTION_INVOKE_ATTRIBUTE_NAME)) {\r\n          this._onInvokeMouseDown(ev, this._getItemIndex(itemRoot));\r\n          break;\r\n        } else if (target === itemRoot) {\r\n          break;\r\n        }\r\n      }\r\n\r\n      target = getParent(target);\r\n    }\r\n  }\r\n\r\n  @autobind\r\n  private _onClick(ev: React.MouseEvent<HTMLElement>) {\r\n    this._updateModifiers(ev);\r\n\r\n    let target = ev.target as HTMLElement;\r\n    let itemRoot = this._findItemRoot(target);\r\n\r\n    // No-op if selection is disabled\r\n    if (this._isSelectionDisabled(target)) {\r\n      return;\r\n    }\r\n\r\n    while (target !== this.refs.root) {\r\n      if (this._hasAttribute(target, SELECTALL_TOGGLE_ALL_ATTRIBUTE_NAME)) {\r\n        this._onToggleAllClick(ev);\r\n        break;\r\n      } else if (itemRoot) {\r\n        let index = this._getItemIndex(itemRoot);\r\n\r\n        if (this._hasAttribute(target, SELECTION_TOGGLE_ATTRIBUTE_NAME)) {\r\n          if (this._isShiftPressed) {\r\n            this._onItemSurfaceClick(ev, index);\r\n          } else {\r\n            this._onToggleClick(ev, index);\r\n          }\r\n          break;\r\n        } else if (this._hasAttribute(target, SELECTION_INVOKE_ATTRIBUTE_NAME)) {\r\n          this._onInvokeClick(ev, index);\r\n          break;\r\n        } else if (target === itemRoot) {\r\n          this._onItemSurfaceClick(ev, index);\r\n          break;\r\n        }\r\n      }\r\n\r\n      target = getParent(target);\r\n    }\r\n  }\r\n\r\n  @autobind\r\n  private _onContextMenu(ev: React.MouseEvent<HTMLElement>) {\r\n    const target = ev.target as HTMLElement;\r\n\r\n    const { onItemContextMenu, selection } = this.props;\r\n    if (onItemContextMenu) {\r\n      const itemRoot = this._findItemRoot(target);\r\n\r\n      if (itemRoot) {\r\n        const index = this._getItemIndex(itemRoot);\r\n        onItemContextMenu(selection.getItems()[index], index, ev.nativeEvent);\r\n        ev.preventDefault();\r\n      }\r\n    }\r\n  }\r\n\r\n  private _isSelectionDisabled(target: HTMLElement): boolean {\r\n    while (target !== this.refs.root) {\r\n      if (this._hasAttribute(target, SELECTION_DISABLED_ATTRIBUTE_NAME)) {\r\n        return true;\r\n      }\r\n      target = getParent(target);\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * In multi selection, if you double click within an item's root (but not within the invoke element or input elements),\r\n   * we should execute the invoke handler.\r\n   */\r\n  @autobind\r\n  private _onDoubleClick(ev: React.MouseEvent<HTMLElement>) {\r\n    let target = ev.target as HTMLElement;\r\n\r\n    if (this._isSelectionDisabled(target)) {\r\n      return;\r\n    }\r\n\r\n    let { selectionMode, onItemInvoked } = this.props;\r\n    let itemRoot = this._findItemRoot(target);\r\n\r\n    if (itemRoot && onItemInvoked && selectionMode !== SelectionMode.none && !this._isInputElement(target)) {\r\n      let index = this._getItemIndex(itemRoot);\r\n\r\n      while (target !== this.refs.root) {\r\n        if (\r\n          this._hasAttribute(target, SELECTION_TOGGLE_ATTRIBUTE_NAME) ||\r\n          this._hasAttribute(target, SELECTION_INVOKE_ATTRIBUTE_NAME)) {\r\n          break;\r\n        } else if (target === itemRoot) {\r\n          this._onInvokeClick(ev, index);\r\n          break;\r\n        }\r\n\r\n        target = getParent(target);\r\n      }\r\n\r\n      target = getParent(target);\r\n    }\r\n  }\r\n\r\n  @autobind\r\n  private _onKeyDown(ev: React.KeyboardEvent<HTMLElement>) {\r\n    this._updateModifiers(ev);\r\n\r\n    let target = ev.target as HTMLElement;\r\n\r\n    if (this._isSelectionDisabled(target)) {\r\n      return;\r\n    }\r\n\r\n    let { selection, selectionMode } = this.props;\r\n    let isSelectAllKey = ev.which === KeyCodes.a && (this._isCtrlPressed || this._isMetaPressed);\r\n    let isClearSelectionKey = ev.which === KeyCodes.escape;\r\n\r\n    // Ignore key downs from input elements.\r\n    if (this._isInputElement(target)) {\r\n      return;\r\n    }\r\n\r\n    // If ctrl-a is pressed, select all (if all are not already selected.)\r\n    if (isSelectAllKey && selectionMode === SelectionMode.multiple && !selection.isAllSelected()) {\r\n      selection.setAllSelected(true);\r\n      ev.stopPropagation();\r\n      ev.preventDefault();\r\n      return;\r\n    }\r\n\r\n    // If escape is pressed, clear selection (if any are selected.)\r\n    if (isClearSelectionKey && selection.getSelectedCount() > 0) {\r\n      selection.setAllSelected(false);\r\n      ev.stopPropagation();\r\n      ev.preventDefault();\r\n      return;\r\n    }\r\n\r\n    let itemRoot = this._findItemRoot(target);\r\n\r\n    // If a key was pressed within an item, we should treat \"enters\" as invokes and \"space\" as toggle\r\n    if (itemRoot) {\r\n      let index = this._getItemIndex(itemRoot);\r\n\r\n      while (target !== this.refs.root) {\r\n        if (this._hasAttribute(target, SELECTION_TOGGLE_ATTRIBUTE_NAME)) {\r\n          // For toggle elements, assuming they are rendered as buttons, they will generate a click event,\r\n          // so we can no-op for any keydowns in this case.\r\n          break;\r\n        } else if (target === itemRoot) {\r\n          if (ev.which === KeyCodes.enter) {\r\n            this._onInvokeClick(ev, index);\r\n          } else if (ev.which === KeyCodes.space) {\r\n            this._onToggleClick(ev, index);\r\n          }\r\n          break;\r\n        }\r\n\r\n        target = getParent(target);\r\n      }\r\n    }\r\n  }\r\n\r\n  private _onToggleAllClick(ev: React.MouseEvent<HTMLElement>) {\r\n    let { selection, selectionMode } = this.props;\r\n\r\n    if (selectionMode === SelectionMode.multiple) {\r\n      selection.toggleAllSelected();\r\n      ev.stopPropagation();\r\n      ev.preventDefault();\r\n    }\r\n  }\r\n\r\n  private _onToggleClick(ev: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>, index: number) {\r\n    let { selection, selectionMode } = this.props;\r\n\r\n    if (selectionMode === SelectionMode.multiple) {\r\n      selection.toggleIndexSelected(index);\r\n    } else if (selectionMode === SelectionMode.single) {\r\n      let isSelected = selection.isIndexSelected(index);\r\n      selection.setChangeEvents(false);\r\n      selection.setAllSelected(false);\r\n      selection.setIndexSelected(index, !isSelected, true);\r\n      selection.setChangeEvents(true);\r\n    } else {\r\n      return;\r\n    }\r\n\r\n    ev.stopPropagation();\r\n\r\n    // NOTE: ev.preventDefault is not called for toggle clicks, because this will kill the browser behavior\r\n    // for checkboxes if you use a checkbox for the toggle.\r\n  }\r\n\r\n  private _onInvokeClick(ev: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>, index: number) {\r\n    let { selection, onItemInvoked } = this.props;\r\n\r\n    if (onItemInvoked) {\r\n      onItemInvoked(selection.getItems()[index], index, ev.nativeEvent);\r\n      ev.preventDefault();\r\n      ev.stopPropagation();\r\n    }\r\n  }\r\n\r\n  private _onItemSurfaceClick(ev: React.SyntheticEvent<HTMLElement>, index: number) {\r\n    let { selection, selectionMode } = this.props;\r\n    let isToggleModifierPressed = this._isCtrlPressed || this._isMetaPressed;\r\n\r\n    if (selectionMode === SelectionMode.multiple) {\r\n      if (this._isShiftPressed) {\r\n        selection.selectToIndex(index, !isToggleModifierPressed);\r\n      } else if (isToggleModifierPressed) {\r\n        selection.toggleIndexSelected(index);\r\n      } else {\r\n        this._clearAndSelectIndex(index);\r\n      }\r\n    } else if (selectionMode === SelectionMode.single) {\r\n      this._clearAndSelectIndex(index);\r\n    }\r\n  }\r\n\r\n  private _onInvokeMouseDown(ev: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>, index: number) {\r\n    let { selection } = this.props;\r\n\r\n    // Only do work if item is not selected.\r\n    if (selection.isIndexSelected(index)) {\r\n      return;\r\n    }\r\n\r\n    this._clearAndSelectIndex(index);\r\n  }\r\n\r\n  private _tryClearOnEmptyClick(ev: MouseEvent) {\r\n    if (\r\n      !this.props.selectionPreservedOnEmptyClick &&\r\n      this._isNonHandledClick(ev.target as HTMLElement)\r\n    ) {\r\n      this.props.selection.setAllSelected(false);\r\n    }\r\n  }\r\n\r\n  private _clearAndSelectIndex(index: number) {\r\n    let { selection } = this.props;\r\n    let isAlreadySingleSelected = selection.getSelectedCount() === 1 && selection.isIndexSelected(index);\r\n\r\n    if (!isAlreadySingleSelected) {\r\n      selection.setChangeEvents(false);\r\n      selection.setAllSelected(false);\r\n      selection.setIndexSelected(index, true, true);\r\n      selection.setChangeEvents(true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * We need to track the modifier key states so that when focus events occur, which do not contain\r\n   * modifier states in the Event object, we know how to behave.\r\n   */\r\n  private _updateModifiers(ev: React.KeyboardEvent<HTMLElement> | React.MouseEvent<HTMLElement>) {\r\n    this._isShiftPressed = ev.shiftKey;\r\n    this._isCtrlPressed = ev.ctrlKey;\r\n    this._isMetaPressed = ev.metaKey;\r\n  }\r\n\r\n  private _findItemRoot(target: HTMLElement): HTMLElement {\r\n    let { selection } = this.props;\r\n\r\n    while (target !== this.refs.root) {\r\n      let indexValue = target.getAttribute(SELECTION_INDEX_ATTRIBUTE_NAME);\r\n      let index = Number(indexValue);\r\n\r\n      if (indexValue !== null && index >= 0 && index < selection.getItems().length) {\r\n        break;\r\n      }\r\n\r\n      target = getParent(target);\r\n    }\r\n\r\n    if (target === this.refs.root) {\r\n      return undefined;\r\n    }\r\n\r\n    return target;\r\n  }\r\n\r\n  private _getItemIndex(itemRoot: HTMLElement): number {\r\n    return Number(itemRoot.getAttribute(SELECTION_INDEX_ATTRIBUTE_NAME));\r\n  }\r\n\r\n  private _hasAttribute(element: HTMLElement, attributeName: string): boolean {\r\n    let isToggle = false;\r\n\r\n    while (!isToggle && element !== this.refs.root) {\r\n      isToggle = element.getAttribute(attributeName) === 'true';\r\n      element = getParent(element);\r\n    }\r\n\r\n    return isToggle;\r\n  }\r\n\r\n  private _isInputElement(element: HTMLElement): boolean {\r\n    return element.tagName === 'INPUT' || element.tagName === 'TEXTAREA';\r\n  }\r\n\r\n  private _isNonHandledClick(element: HTMLElement): boolean {\r\n    let doc = getDocument();\r\n\r\n    if (doc && element) {\r\n      while (element && element !== doc.documentElement) {\r\n        if (isElementTabbable(element)) {\r\n          return false;\r\n        }\r\n\r\n        element = getParent(element);\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}