{"version":3,"sources":["configureWebpack/test/ConfigureExternalBundlingWebpackTask.test.ts"],"names":[],"mappings":"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","file":"configureWebpack/test/ConfigureExternalBundlingWebpackTask.test.js","sourcesContent":["/// <reference types=\"mocha\" />\r\n\r\nimport { assert } from 'chai';\r\nimport { WebpackTask } from '@microsoft/gulp-core-build-webpack';\r\nimport * as webpack from 'webpack';\r\nimport { cloneDeep } from 'lodash';\r\nimport * as path from 'path';\r\n\r\nimport { ConfigureExternalBundlingWebpackTask } from './../ConfigureExternalBundlingWebpackTask';\r\nimport { ConfigureWebpackTask, IBundleEntry } from './../ConfigureWebpackTask';\r\nimport { ILocaleMap } from './../../OdspGulpTask';\r\nimport { IWebpackStatsObject, IWebpackModule } from './../../copyAssets/CopyAssetsTask';\r\n\r\nlet task: ConfigureExternalBundlingWebpackTask;\r\nlet errorBuffer: string[];\r\nlet warningBuffer: string[];\r\n\r\nconst baseConfig: webpack.Configuration = {\r\n  output: {\r\n    libraryTarget: 'var'\r\n  }\r\n};\r\n\r\nconst entries: IBundleEntry[] = [\r\n  {\r\n    configEntry: undefined,\r\n    entryName: 'entry_a',\r\n    nonLocalizedEntrypointPath: 'path/to/A.js',\r\n    manifest: undefined\r\n  },\r\n  {\r\n    configEntry: undefined,\r\n    entryName: 'entry_b',\r\n    nonLocalizedEntrypointPath: 'path/to/B.js',\r\n    manifest: undefined\r\n  }];\r\n\r\nconst locales: string[] = ['en-us', 'fr-fr'];\r\n\r\nconst localizedResources: { [name: string]: ILocaleMap } = {\r\n  'Loc1': {\r\n    [locales[0]]: 'path/A/en-us',\r\n    [locales[1]]: 'path/A/fr-fr'\r\n  },\r\n  'Loc2': {\r\n    [locales[0]]: 'path/B/en-us',\r\n    [locales[1]]: 'path/B/fr-fr'\r\n  }\r\n};\r\n\r\nconst externals: { [name: string]: string } = {\r\n  'A': 'a',\r\n  'B': 'b'\r\n};\r\n\r\nconst rootPath: string = __dirname;\r\nconst distFolder: string = 'dist';\r\n\r\ninterface ITaskCompletionResult {\r\n  taskCompleted: boolean;\r\n  taskError: string;\r\n}\r\n\r\ndescribe('ConfigureExternalBundlingWebpackTask', () => {\r\n  beforeEach(() => {\r\n    task = new ConfigureExternalBundlingWebpackTask();\r\n    task.buildConfig = {\r\n      rootPath,\r\n      distFolder,\r\n      properties: {}\r\n    };\r\n\r\n    task.properties.externals = externals;\r\n\r\n    errorBuffer = [];\r\n    warningBuffer = [];\r\n\r\n    task.logWarning = (text: string) => warningBuffer.push(text);\r\n    task.logError = (text: string) => errorBuffer.push(text);\r\n  });\r\n\r\n  describe('setConfig', () => {\r\n    it('logs a warning if the webpack paramter is not a webpack task', () => {\r\n      task.setConfig({webpack: {} as any}); // tslint:disable-line:no-any\r\n      assert.equal(warningBuffer.length, 1);\r\n      assert.equal(errorBuffer.length, 0);\r\n    });\r\n\r\n    it('does not log a warning if the webpack paramter is a webpack task', () => {\r\n      attachWebpackTask();\r\n      assert.equal(warningBuffer.length, 0);\r\n      assert.equal(errorBuffer.length, 0);\r\n    });\r\n  });\r\n\r\n  describe('executeTask', () => {\r\n    it('logs a warning and doesn\\'t do anything if a webpack task isn\\'t provided', () => {\r\n      const result: ITaskCompletionResult = callExecuteTask();\r\n\r\n      assert.isTrue(result.taskCompleted);\r\n      assert.isUndefined(result.taskError);\r\n      assert.equal(warningBuffer.length, 1);\r\n      assert.equal(errorBuffer.length, 0);\r\n    });\r\n\r\n    it('logs an error and disables the webpack task if no configureWebpackTask is provided', () => {\r\n      const webpackTask: WebpackTask = attachWebpackTask();\r\n      const result: ITaskCompletionResult = callExecuteTask();\r\n\r\n      assert.isTrue(result.taskCompleted);\r\n      assert.isUndefined(result.taskError);\r\n      assert.equal(warningBuffer.length, 0);\r\n      assert.equal(errorBuffer.length, 1);\r\n\r\n      assert.isFalse(webpackTask.isEnabled(undefined));\r\n    });\r\n\r\n    it('disables the webpack task if no localized resources are provided', () => {\r\n      const webpackTask: WebpackTask = attachWebpackTask();\r\n      attachConfigureWebpackTask();\r\n      const result: ITaskCompletionResult = callExecuteTask();\r\n\r\n      assert.isTrue(result.taskCompleted);\r\n      assert.isUndefined(result.taskError);\r\n      assert.equal(warningBuffer.length, 0);\r\n      assert.equal(errorBuffer.length, 0);\r\n\r\n      assert.isFalse(webpackTask.isEnabled(undefined));\r\n    });\r\n\r\n    it('logs an error if there\\'s no existing webpack stats object', () => {\r\n      attachWebpackTask();\r\n      configureWithLocResources();\r\n      attachConfigureWebpackTask();\r\n      const result: ITaskCompletionResult = callExecuteTask();\r\n\r\n      assert.isTrue(result.taskCompleted);\r\n      assert.isUndefined(result.taskError);\r\n      assert.equal(warningBuffer.length, 0);\r\n      assert.equal(errorBuffer.length, 1);\r\n    });\r\n\r\n    it('returns an error if the localized resources weren\\'t discovered', () => {\r\n      attachWebpackTask();\r\n      configureWithLocResources();\r\n      attachWebpackStats();\r\n      attachConfigureWebpackTask();\r\n\r\n      task.properties.discoveredLocalizedResources = undefined;\r\n      const result: ITaskCompletionResult = callExecuteTask();\r\n\r\n      assert.isTrue(result.taskCompleted);\r\n      assert.equal(warningBuffer.length, 0);\r\n      assert.equal(errorBuffer.length, 0);\r\n      assert.isDefined(result.taskError);\r\n\r\n      // Should have returned all of the resources' names.\r\n      const resourceNames: string[] = Object.keys(localizedResources);\r\n      resourceNames.forEach((resourceName: string) => {\r\n        assert.notEqual(result.taskError.indexOf(resourceName), -1);\r\n      });\r\n    });\r\n\r\n    it('returns an error if the localized resources don\\'t have matching locales', () => {\r\n      attachWebpackTask();\r\n      configureWithLocResources();\r\n      attachWebpackStats();\r\n      attachConfigureWebpackTask();\r\n\r\n      // This only applies if we're in production mode\r\n      task.buildConfig.production = true;\r\n\r\n      const resourceNames: string[] = Object.keys(localizedResources);\r\n      task.properties.discoveredLocalizedResources[resourceNames[1]] = { 'fr-fr': 'test' };\r\n\r\n      const result: ITaskCompletionResult = callExecuteTask();\r\n\r\n      assert.isTrue(result.taskCompleted);\r\n      assert.equal(warningBuffer.length, 0);\r\n      assert.equal(errorBuffer.length, 0);\r\n      assert.isDefined(result.taskError);\r\n\r\n      // Should have returned the second resource's name\r\n      assert.notEqual(result.taskError.indexOf(resourceNames[1]), -1);\r\n\r\n      // Should have returned the first resource's locale names\r\n      const localeNames: string[] = Object.keys(localizedResources[resourceNames[0]]);\r\n      localeNames.forEach((localeName: string) => {\r\n        assert.notEqual(result.taskError.indexOf(localeName), -1);\r\n      });\r\n    });\r\n\r\n    it('calls \"tinkerWithLocConfig\" on the configureWebpackTask', () => {\r\n      attachWebpackTask();\r\n      configureWithLocResources();\r\n      attachWebpackStats();\r\n      const configureWebpackTask: ConfigureWebpackTask = attachConfigureWebpackTask();\r\n\r\n      let tinkerWithLocConfigCalled: boolean = false;\r\n      configureWebpackTask.tinkerWithLocConfig = () => tinkerWithLocConfigCalled = true;\r\n\r\n      const result: ITaskCompletionResult = callExecuteTask();\r\n\r\n      assert.isTrue(result.taskCompleted);\r\n      assert.equal(warningBuffer.length, 0);\r\n      assert.equal(errorBuffer.length, 0);\r\n      assert.isUndefined(result.taskError);\r\n      assert.isTrue(tinkerWithLocConfigCalled);\r\n    });\r\n\r\n    it('has a valid Configuration', () => {\r\n      const webpackTask: WebpackTask = attachWebpackTask();\r\n      configureWithLocResources();\r\n      attachWebpackStats();\r\n      attachConfigureWebpackTask();\r\n      setBundleEntries();\r\n\r\n      const result: ITaskCompletionResult = callExecuteTask();\r\n\r\n      assert.isTrue(result.taskCompleted);\r\n      assert.equal(warningBuffer.length, 0);\r\n      assert.equal(errorBuffer.length, 0);\r\n      assert.isUndefined(result.taskError);\r\n\r\n      const configs: webpack.Configuration[] = webpackTask.taskConfig.config as webpack.Configuration[];\r\n\r\n      configs.forEach((config: webpack.Configuration) => {\r\n        // json-loader is configured\r\n        assert.equal(config.module.loaders.length, 1);\r\n        assert.equal(config.module.loaders[0].loader, 'json-loader');\r\n        assert.isNotNull('test.json'.match(config.module.loaders[0].test as RegExp));\r\n        assert.isNull('test.jsone'.match(config.module.loaders[0].test as RegExp));\r\n\r\n        // .map files aren't parsed\r\n        assert.equal((config.module.noParse as RegExp[]).length, 1);\r\n        assert.isNotNull('test.map'.match((config.module.noParse as RegExp[])[0]));\r\n        assert.isNull('test.mape'.match((config.module.noParse as RegExp[])[0]));\r\n\r\n        // No post-loaders\r\n        assert.equal(config.module.postLoaders.length, 0);\r\n\r\n        // No source-map-loader in non-production mode\r\n        assert.equal(config.module.preLoaders.length, 1);\r\n        assert.equal(config.module.preLoaders[0].loader, 'source-map-loader');\r\n        assert.isNotNull('test.js'.match(config.module.preLoaders[0].test as RegExp));\r\n        assert.isNull('test.jsx'.match(config.module.preLoaders[0].test as RegExp));\r\n\r\n        // resolveLoader root is in the node_modules directory\r\n        assert.isNotNull((config.resolveLoader.root as string).match(/node_modules$/));\r\n\r\n        // context is the output directory\r\n        assert.equal(config.context, task.outputDirectory);\r\n\r\n        // source-map is set as the dev tool in non-production mode\r\n        assert.equal(config.devtool, 'source-map');\r\n\r\n        // externals are correctly listed\r\n        const externalsKeys: string[] = Object.keys(externals);\r\n        assert.equal((config.externals as string[]).length, externalsKeys.length + 3);\r\n        externalsKeys.forEach((external: string) => {\r\n          assert.notEqual((config.externals as string[]).indexOf(external), -1);\r\n        });\r\n\r\n        const configEntries: { [name: string]: string } = config.entry as { [name: string]: string };\r\n        const configEntryKeys: string[] = Object.keys(configEntries);\r\n        assert.equal(configEntryKeys.length, entries.length);\r\n        configEntryKeys.forEach((key: string) => {\r\n          assert.isTrue(entries.some((entry: IBundleEntry) => {\r\n            const configEntryPath: string = configEntries[key];\r\n            const expectedPath: string =\r\n              path.join(rootPath, distFolder, path.basename(entry.nonLocalizedEntrypointPath));\r\n\r\n            return path.basename(entry.nonLocalizedEntrypointPath, '.js') === key &&\r\n                   configEntryPath === expectedPath;\r\n          }));\r\n        });\r\n\r\n        assert.equal(config.output.libraryTarget, 'amd');\r\n        assert.equal(config.output.path, path.join(rootPath, distFolder));\r\n        assert.equal(config.output.devtoolModuleFilenameTemplate, 'webpack:///../[resource-path]');\r\n        assert.equal(config.output.devtoolFallbackModuleFilenameTemplate, 'webpack:///../[resource-path]?[hash]');\r\n\r\n        assert.isTrue(locales.some((locale: string) => {\r\n          return config.output.filename.indexOf(locale) !== -1 &&\r\n                 config.output.chunkFilename.indexOf(locale) !== -1;\r\n        }));\r\n\r\n        const alias: webpack.Resolve = config.resolve.alias;\r\n        Object.keys(localizedResources).forEach((resourceName: string) => {\r\n          assert.isDefined(alias[resourceName]);\r\n        });\r\n      });\r\n    });\r\n\r\n    it('selects all locales if \"bundleAllLocalizedResources\" is enabled', () => {\r\n      const webpackTask: WebpackTask = attachWebpackTask();\r\n      configureWithLocResources();\r\n      attachWebpackStats();\r\n      const configureWebpackTask: ConfigureWebpackTask = attachConfigureWebpackTask();\r\n      setBundleEntries();\r\n\r\n      task.setConfig({\r\n        localizedResources: null, // tslint:disable-line:no-null-keyword\r\n        bundleAllLocalizedResources: true\r\n      });\r\n\r\n      configureWebpackTask.buildConfig = task.buildConfig;\r\n\r\n      const result: ITaskCompletionResult = callExecuteTask();\r\n\r\n      assert.isTrue(result.taskCompleted);\r\n      assert.equal(warningBuffer.length, 0);\r\n      assert.equal(errorBuffer.length, 0);\r\n      assert.isUndefined(result.taskError);\r\n\r\n      const configs: webpack.Configuration[] = webpackTask.taskConfig.config as webpack.Configuration[];\r\n      configs.forEach((config: webpack.Configuration) => {\r\n        const alias: webpack.Resolve = config.resolve.alias;\r\n        Object.keys(localizedResources).forEach((resourceName: string) => {\r\n          assert.isDefined(alias[resourceName]);\r\n        });\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('tinkerWithBaseWebackConfig', () => {\r\n    it('doesn\\'t do anything if there are no localized resources', () => {\r\n      const testConfig: webpack.Configuration = cloneDeep(baseConfig);\r\n      task.tinkerWithBaseWebpackConfig(testConfig);\r\n      assert.deepEqual(testConfig, baseConfig);\r\n    });\r\n\r\n    it('sets the config type to \"amd\" if there are localized resources', () => {\r\n      configureWithLocResources();\r\n      const testConfig: webpack.Configuration = cloneDeep(baseConfig);\r\n      task.tinkerWithBaseWebpackConfig(testConfig);\r\n      assert.equal(testConfig.output.libraryTarget, 'amd');\r\n    });\r\n  });\r\n});\r\n\r\nfunction callExecuteTask(): ITaskCompletionResult {\r\n  const result: ITaskCompletionResult = {\r\n    taskCompleted: false,\r\n    taskError: undefined\r\n  };\r\n\r\n  task.executeTask(undefined, (error?: string) => {\r\n    result.taskCompleted = true;\r\n    result.taskError = error;\r\n  });\r\n\r\n  return result;\r\n}\r\n\r\nfunction attachWebpackTask(): WebpackTask {\r\n  const webpackTask: WebpackTask = new WebpackTask();\r\n  task.setConfig({ webpack: webpackTask });\r\n  return webpackTask;\r\n}\r\n\r\nfunction attachWebpackStats(): webpack.compiler.Stats {\r\n  const stats: webpack.compiler.Stats = {\r\n      toJson: (): IWebpackStatsObject => {\r\n        return {\r\n          modules: [\r\n            {\r\n              name: 'external \"Loc1\"'\r\n            } as IWebpackModule,\r\n            {\r\n              name: 'external \"Loc2\"'\r\n            } as IWebpackModule\r\n          ]\r\n        } as IWebpackStatsObject;\r\n      }\r\n    } as webpack.compiler.Stats;\r\n  task.properties.webpackStats = stats;\r\n  return stats;\r\n}\r\n\r\nfunction configureWithLocResources(): void {\r\n  task.setConfig({localizedResources: Object.keys(localizedResources)});\r\n  task.properties.discoveredLocalizedResources = cloneDeep(localizedResources);\r\n}\r\n\r\nfunction attachConfigureWebpackTask(): ConfigureWebpackTask {\r\n  const configureWebpackTask: ConfigureWebpackTask = new ConfigureWebpackTask();\r\n  task.setConfig({ configureWebpackTask });\r\n  return configureWebpackTask;\r\n}\r\n\r\nfunction setBundleEntries(): void {\r\n  task.properties.bundleEntries = cloneDeep(entries);\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}