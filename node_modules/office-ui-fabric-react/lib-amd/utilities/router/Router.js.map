{"version":3,"sources":["utilities/router/Router.tsx"],"names":[],"mappings":"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","file":"utilities/router/Router.js","sourcesContent":["import * as React from 'react';\r\nimport { BaseComponent } from '../../Utilities';\r\n\r\nexport interface IRouterProps {\r\n  replaceState?: boolean;\r\n  children?: React.ReactElement<any>[];\r\n  onNewRouteLoaded?: () => void;\r\n}\r\n\r\nexport class Router extends BaseComponent<IRouterProps, {}> {\r\n  public componentDidMount() {\r\n    this._events.on(window, 'hashchange', () => this.forceUpdate());\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <div>\r\n        { this._resolveRoute() }\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private _getPath() {\r\n    let path = location.hash;\r\n    let index = path.lastIndexOf('#');\r\n\r\n    if (index > 0) {\r\n      path = path.substr(0, index);\r\n    }\r\n\r\n    return path;\r\n  }\r\n\r\n  private _resolveRoute(path?: string, children?: React.ReactNode) {\r\n    path = path || this._getPath();\r\n    children = children || this.props.children;\r\n\r\n    let routes = React.Children.toArray(children);\r\n\r\n    for (let i = 0; i < routes.length; i++) {\r\n      let route: any = routes[i];\r\n\r\n      if (_match(path, route)) {\r\n        let { component, getComponent } = route.props;\r\n\r\n        if (getComponent) {\r\n          let asynchronouslyResolved = false;\r\n\r\n          component = getComponent.component;\r\n\r\n          if (!component) {\r\n            getComponent((resolved) => {\r\n              component = getComponent.component = resolved;\r\n\r\n              if (asynchronouslyResolved) {\r\n                this.forceUpdate();\r\n              }\r\n            });\r\n          }\r\n          // Note: in webpack 2, this ends up always async.\r\n          asynchronouslyResolved = true;\r\n        }\r\n\r\n        if (component) {\r\n          let componentChildren = this._resolveRoute(path, route.props.children || []);\r\n\r\n          if (componentChildren) {\r\n            return React.createElement(component, { key: route.key }, componentChildren);\r\n          } else {\r\n            return React.createElement(component, { key: route.key });\r\n          }\r\n        } else if (getComponent) {\r\n          // We are asynchronously fetching this component.\r\n          return null;\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n}\r\n\r\nfunction _match(currentPath, child): boolean {\r\n  if (child.props) {\r\n    let { path } = child.props;\r\n\r\n    path = path || '';\r\n    currentPath = currentPath || '';\r\n\r\n    return (\r\n      (!path) ||\r\n      (path.toLowerCase() === currentPath.toLowerCase())\r\n    );\r\n  }\r\n\r\n  return false;\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}