{"version":3,"sources":["utilities/FileDeletionUtility.test.ts"],"names":[],"mappings":"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","file":"utilities/FileDeletionUtility.test.js","sourcesContent":["import { assert } from 'chai';\r\nimport { FileDeletionUtility } from './FileDeletionUtility';\r\n\r\ndescribe('FileDeletionUtility', () => {\r\n  describe('constructor', () => {\r\n    it('can be constructed', () => {\r\n      const test: FileDeletionUtility = new FileDeletionUtility();\r\n    });\r\n  });\r\n  describe('isParentDirectory', () => {\r\n    it('can detect an immediate child', () => {\r\n      assert.isTrue(\r\n        FileDeletionUtility.isParentDirectory('/a', '/a/b.txt')\r\n      );\r\n    });\r\n    it('can detect a deep child', () => {\r\n      assert.isTrue(\r\n        FileDeletionUtility.isParentDirectory('/a', '/a/b/c/d.txt')\r\n      );\r\n    });\r\n    it('can detect if base path is longer', () => {\r\n      assert.isTrue(\r\n        FileDeletionUtility.isParentDirectory('/a/b/c/d', '/a/b/c/d/g.txt')\r\n      );\r\n    });\r\n    it('can detect siblings', () => {\r\n      assert.isFalse(\r\n        FileDeletionUtility.isParentDirectory('/a/b', '/a/c')\r\n      );\r\n    });\r\n    it('can detect siblings with file extensions', () => {\r\n      assert.isFalse(\r\n        FileDeletionUtility.isParentDirectory('/a/b/c.txt', '/a/b/d.txt')\r\n      );\r\n    });\r\n    it('can detect when not a parent', () => {\r\n      assert.isFalse(\r\n        FileDeletionUtility.isParentDirectory('/a/b/c', '/a')\r\n      );\r\n      assert.isFalse(\r\n        FileDeletionUtility.isParentDirectory('/a/b/c', '/a/b.txt')\r\n      );\r\n    });\r\n    it('accepts anything under the root', () => {\r\n      assert.isTrue(\r\n        FileDeletionUtility.isParentDirectory('/', '/a.txt')\r\n      );\r\n      assert.isTrue(\r\n        FileDeletionUtility.isParentDirectory('/', '/a/b/c/d.txt')\r\n      );\r\n    });\r\n    it('it is case sensitive', () => {\r\n      assert.isFalse(\r\n        FileDeletionUtility.isParentDirectory('/a', '/A/b.txt')\r\n      );\r\n      assert.isTrue(\r\n        FileDeletionUtility.isParentDirectory('/a', '/a/b.txt')\r\n      );\r\n      assert.isFalse(\r\n        FileDeletionUtility.isParentDirectory('/a/B/c', '/a/b/c/d.txt')\r\n      );\r\n    });\r\n    it('it does not accept null or undefined', () => {\r\n      /* tslint:disable:no-null-keyword */\r\n      assert.isFalse(\r\n        FileDeletionUtility.isParentDirectory('', '/A/b.txt')\r\n      );\r\n      assert.isFalse(\r\n        FileDeletionUtility.isParentDirectory(undefined, '/a/b.txt')\r\n      );\r\n      assert.isFalse(\r\n        FileDeletionUtility.isParentDirectory(null, '/a/b/c/d.txt')\r\n      );\r\n      assert.isFalse(\r\n        FileDeletionUtility.isParentDirectory('/A/b.txt', '')\r\n      );\r\n      assert.isFalse(\r\n        FileDeletionUtility.isParentDirectory('/a/b.txt', undefined)\r\n      );\r\n      assert.isFalse(\r\n        FileDeletionUtility.isParentDirectory('/a/b/c/d.txt', null)\r\n      );\r\n      /* tslint:enable:no-null-keyword */\r\n    });\r\n  });\r\n  describe('removeChildren', () => {\r\n    it('removes children of a parent', () => {\r\n      const files: string[] = [\r\n        '/a',\r\n        '/a/b',\r\n        '/a/b/c.txt',\r\n        '/a/b/d.txt',\r\n        '/a/z',\r\n        '/b/f/g',\r\n        '/b/f/ggg',\r\n        '/b/f/ggg/foo.txt',\r\n        '/c',\r\n        '/c/a.txt',\r\n        '/c/f/g/h/j/k/l/q',\r\n        '/d'\r\n      ];\r\n      const expected: string[] = [\r\n        '/a',\r\n        '/b/f/g',\r\n        '/b/f/ggg',\r\n        '/c',\r\n        '/d'\r\n      ];\r\n      const actual: string[] = FileDeletionUtility.removeChildren(files);\r\n\r\n      assert.equal(actual.length, expected.length);\r\n      assert.includeMembers(expected, actual);\r\n    });\r\n    it('removes everything under the root', () => {\r\n      const files: string[] = [\r\n        '/',\r\n        '/a/b',\r\n        '/a/b/c.txt',\r\n        '/a/b/d.txt',\r\n        '/a/z',\r\n        '/b/f/g',\r\n        '/b/f/ggg',\r\n        '/b/f/ggg/foo.txt',\r\n        '/c',\r\n        '/c/a.txt',\r\n        '/c/f/g/h/j/k/l/q',\r\n        '/d'\r\n      ];\r\n      const expected: string[] = [\r\n        '/'\r\n      ];\r\n      const actual: string[] = FileDeletionUtility.removeChildren(files);\r\n\r\n      assert.equal(actual.length, expected.length);\r\n      assert.includeMembers(expected, actual);\r\n    });\r\n  });\r\n});"],"sourceRoot":"..\\..\\src"}