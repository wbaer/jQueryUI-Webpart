{"version":3,"sources":["components/GroupedList/GroupHeader.tsx"],"names":[],"mappings":";;;;;;;;;;;;;IAkBA;QAAiC,+BAAsD;QACrF,qBAAY,KAAyB;YAArC,YACE,kBAAM,KAAK,CAAC,SAMb;YAJC,KAAI,CAAC,KAAK,GAAG;gBACX,WAAW,EAAE,KAAI,CAAC,KAAK,CAAC,KAAK,IAAI,KAAI,CAAC,KAAK,CAAC,KAAK,CAAC,WAAW;gBAC7D,gBAAgB,EAAE,KAAK;aACxB,CAAC;;QACJ,CAAC;QAEM,+CAAyB,GAAhC,UAAiC,QAAQ;YACvC,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;gBACnB,IAAI,YAAY,GAAG,QAAQ,CAAC,KAAK,CAAC,WAAW,CAAC;gBAC9C,IAAI,cAAc,GAAG,QAAQ,CAAC,WAAW,IAAI,QAAQ,CAAC,WAAW,CAAC,cAAc,CAAC;gBACjF,IAAI,iBAAiB,GAAG,CAAC,YAAY,IAAI,cAAc,IAAI,cAAc,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;gBAE1F,IAAI,CAAC,QAAQ,CAAC;oBACZ,WAAW,EAAE,YAAY;oBACzB,gBAAgB,EAAE,iBAAiB;iBACpC,CAAC,CAAC;YACL,CAAC;QACH,CAAC;QAEM,4BAAM,GAAb;YACM,IAAA,eASU,EARZ,gBAAK,EACL,0BAAU,EACV,sBAAQ,EACR,gCAAa,EACb,4BAAW,EACX,0BAAU,EACV,sBAAQ,EACR,gEAA6B,CAChB;YACX,IAAA,eAA8C,EAA5C,4BAAW,EAAE,sCAAgB,CAAgB;YAEnD,EAAE,CAAC,CAAC,6BAA6B,KAAK,SAAS,CAAC,CAAC,CAAC;gBAChD,6BAA6B,GAAG,IAAI,CAAC;YACvC,CAAC;YACD,IAAI,cAAc,GAAG,aAAa,KAAK,qBAAa,CAAC,QAAQ,CAAC;YAC9D,IAAI,uBAAuB,GAAG,cAAc,IAAI,CAAC,6BAA6B,IAAI,CAAC,CAAC,KAAK,IAAI,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC;YACjH,IAAI,iBAAiB,GAAG,UAAU,IAAI,QAAQ,CAAC;YAC/C,MAAM,CAAC,KAAK,IAAI,CACd,6BACE,SAAS,EAAG,eAAG,CAAC,gBAAgB,EAAE;oBAChC,aAAa,EAAE,iBAAiB;iBACjC,CAAC,EACF,KAAK,EAAG,QAAQ,GAAG,EAAE,QAAQ,EAAE,QAAQ,CAAC,KAAK,EAAE,GAAG,EAAE,EACpD,OAAO,EAAG,IAAI,CAAC,cAAc,gBAChB,KAAK,CAAC,SAAS,IAAI,KAAK,CAAC,IAAI,uBACtB,IAAI;gBAExB,oBAAC,qBAAS,IAAC,SAAS,EAAG,8BAAkB,CAAC,UAAU;oBAEhD,uBAAuB,GAAG,CAC1B,gCACE,SAAS,EAAC,sBAAsB,2BACR,IAAI,EAC5B,OAAO,EAAG,IAAI,CAAC,yBAAyB;wBACxC,oBAAC,aAAK,IAAC,OAAO,EAAG,iBAAiB,GAAK,CAChC,CACV,GAAG,CAAC,aAAa,KAAK,qBAAa,CAAC,IAAI,GAAG,yBAAW,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC;oBAG3E,yBAAW,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,CAAC;oBAEpC,6BAAK,SAAS,EAAC,yBAAyB;wBAAC,2BAAG,SAAS,EAAC,sBAAsB,GAAK,CAAM;oBACvF,gCAAQ,SAAS,EAAC,uBAAuB,EAAC,OAAO,EAAG,IAAI,CAAC,iBAAiB;wBACxE,2BAAG,SAAS,EAAG,eAAG,CAAC,8BAA8B,EAAE;gCACjD,cAAc,EAAE,WAAW;6BAC5B,CAAC,GAAK,CACA;oBAET,6BAAK,SAAS,EAAC,iCAAiC;wBAC9C;4BAAQ,KAAK,CAAC,IAAI;gCAAU;wBAI5B;;4BAAS,KAAK,CAAC,KAAK;4BAAI,KAAK,CAAC,WAAW,IAAI,GAAG;iCAAW,CACvD;oBAEN,6BAAK,SAAS,EAAG,eAAG,CAAC,wBAAwB,EAAE,EAAE,YAAY,EAAE,gBAAgB,EAAE,CAAC;wBAChF,oBAAC,iBAAO,IAAC,KAAK,EAAG,WAAW,GAAK,CAC7B,CAEI,CACR,CACP,CAAC;QACJ,CAAC;QAGO,uCAAiB,GAAzB,UAA0B,EAAiC;YACrD,IAAA,eAAwD,EAAtD,gBAAK,EAAE,sCAAgB,EAAE,kCAAc,CAAgB;YACvD,IAAA,oCAAW,CAAgB;YAEjC,IAAI,YAAY,GAAG,CAAC,WAAW,CAAC;YAChC,IAAI,iBAAiB,GAAG,CAAC,YAAY,IAAI,cAAc,IAAI,cAAc,CAAC,KAAK,CAAC,CAAC;YAEjF,IAAI,CAAC,QAAQ,CAAC;gBACZ,WAAW,EAAE,YAAY;gBACzB,gBAAgB,EAAE,iBAAiB;aACpC,CAAC,CAAC;YACH,EAAE,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAC;gBACrB,gBAAgB,CAAC,KAAK,CAAC,CAAC;YAC1B,CAAC;YAED,EAAE,CAAC,eAAe,EAAE,CAAC;YACrB,EAAE,CAAC,cAAc,EAAE,CAAC;QACtB,CAAC;QAGO,+CAAyB,GAAjC,UAAkC,EAAiC;YAC7D,IAAA,eAA2C,EAAzC,4CAAmB,EAAE,gBAAK,CAAgB;YAEhD,EAAE,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBACxB,mBAAmB,CAAC,KAAK,CAAC,CAAC;YAC7B,CAAC;YAED,EAAE,CAAC,cAAc,EAAE,CAAC;YACpB,EAAE,CAAC,eAAe,EAAE,CAAC;QACvB,CAAC;QAGO,oCAAc,GAAtB;YACM,IAAA,eAA+D,EAA7D,gBAAK,EAAE,0CAAkB,EAAE,4CAAmB,CAAgB;YAEpE,EAAE,CAAC,CAAC,kBAAkB,CAAC,CAAC,CAAC;gBACvB,kBAAkB,CAAC,KAAK,CAAC,CAAC;YAC5B,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,mBAAmB,CAAC,CAAC,CAAC;gBAC/B,mBAAmB,CAAC,KAAK,CAAC,CAAC;YAC7B,CAAC;QACH,CAAC;QACH,kBAAC;IAAD,CApIA,AAoIC,CApIgC,KAAK,CAAC,SAAS,GAoI/C;IAzCC;QADC,oBAAQ;wDAkBR;IAGD;QADC,oBAAQ;gEAUR;IAGD;QADC,oBAAQ;qDASR;IAnIU,kCAAW","file":"components/GroupedList/GroupHeader.js","sourcesContent":["import * as React from 'react';\r\nimport {\r\n  autobind,\r\n  css\r\n} from '../../Utilities';\r\nimport { IGroupDividerProps } from './GroupedList.Props';\r\nimport { SelectionMode } from '../../utilities/selection/index';\r\nimport { Check } from '../Check/Check';\r\nimport { GroupSpacer } from './GroupSpacer';\r\nimport { Spinner } from '../../Spinner';\r\nimport { FocusZone, FocusZoneDirection } from '../../FocusZone';\r\nimport './GroupHeader.scss';\r\n\r\nexport interface IGroupHeaderState {\r\n  isCollapsed: boolean;\r\n  isLoadingVisible: boolean;\r\n}\r\n\r\nexport class GroupHeader extends React.Component<IGroupDividerProps, IGroupHeaderState> {\r\n  constructor(props: IGroupDividerProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      isCollapsed: this.props.group && this.props.group.isCollapsed,\r\n      isLoadingVisible: false\r\n    };\r\n  }\r\n\r\n  public componentWillReceiveProps(newProps) {\r\n    if (newProps.group) {\r\n      let newCollapsed = newProps.group.isCollapsed;\r\n      let isGroupLoading = newProps.headerProps && newProps.headerProps.isGroupLoading;\r\n      let newLoadingVisible = !newCollapsed && isGroupLoading && isGroupLoading(newProps.group);\r\n\r\n      this.setState({\r\n        isCollapsed: newCollapsed,\r\n        isLoadingVisible: newLoadingVisible\r\n      });\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    let {\r\n      group,\r\n      groupLevel,\r\n      viewport,\r\n      selectionMode,\r\n      loadingText,\r\n      isSelected,\r\n      selected,\r\n      isCollapsedGroupSelectVisible\r\n    } = this.props;\r\n    let { isCollapsed, isLoadingVisible } = this.state;\r\n\r\n    if (isCollapsedGroupSelectVisible === undefined) {\r\n      isCollapsedGroupSelectVisible = true;\r\n    }\r\n    let canSelectGroup = selectionMode === SelectionMode.multiple;\r\n    let isSelectionCheckVisible = canSelectGroup && (isCollapsedGroupSelectVisible || !(group && group.isCollapsed));\r\n    let currentlySelected = isSelected || selected;\r\n    return group && (\r\n      <div\r\n        className={ css('ms-GroupHeader', {\r\n          'is-selected': currentlySelected\r\n        }) }\r\n        style={ viewport ? { minWidth: viewport.width } : {} }\r\n        onClick={ this._onHeaderClick }\r\n        aria-label={ group.ariaLabel || group.name }\r\n        data-is-focusable={ true } >\r\n\r\n        <FocusZone direction={ FocusZoneDirection.horizontal }>\r\n\r\n          { isSelectionCheckVisible ? (\r\n            <button\r\n              className='ms-GroupHeader-check'\r\n              data-selection-toggle={ true }\r\n              onClick={ this._onToggleSelectGroupClick } >\r\n              <Check checked={ currentlySelected } />\r\n            </button>\r\n          ) : (selectionMode !== SelectionMode.none ? GroupSpacer({ count: 1 }) : null)\r\n          }\r\n\r\n          { GroupSpacer({ count: groupLevel }) }\r\n\r\n          <div className='ms-GroupHeader-dropIcon'><i className='ms-Icon ms-Icon--Tag'></i></div>\r\n          <button className='ms-GroupHeader-expand' onClick={ this._onToggleCollapse }>\r\n            <i className={ css('ms-Icon ms-Icon--ChevronDown', {\r\n              'is-collapsed': isCollapsed\r\n            }) } />\r\n          </button>\r\n\r\n          <div className='ms-GroupHeader-title ms-font-xl'>\r\n            <span>{ group.name } </span>\r\n            {/* hasMoreData flag is set when grouping is throttle by SPO server which in turn resorts to regular sorting to simulate\r\n                grouping behaviors, in which case group count is the number of items returned so far. That's the reasons we need to\r\n                use \"+\" to show we might have more items than count indicates. */}\r\n            <span>({ group.count }{ group.hasMoreData && '+' }) </span>\r\n          </div>\r\n\r\n          <div className={ css('ms-GroupHeader-loading', { 'is-loading': isLoadingVisible }) }>\r\n            <Spinner label={ loadingText } />\r\n          </div>\r\n\r\n        </FocusZone>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  @autobind\r\n  private _onToggleCollapse(ev: React.MouseEvent<HTMLElement>) {\r\n    let { group, onToggleCollapse, isGroupLoading } = this.props;\r\n    let { isCollapsed } = this.state;\r\n\r\n    let newCollapsed = !isCollapsed;\r\n    let newLoadingVisible = !newCollapsed && isGroupLoading && isGroupLoading(group);\r\n\r\n    this.setState({\r\n      isCollapsed: newCollapsed,\r\n      isLoadingVisible: newLoadingVisible\r\n    });\r\n    if (onToggleCollapse) {\r\n      onToggleCollapse(group);\r\n    }\r\n\r\n    ev.stopPropagation();\r\n    ev.preventDefault();\r\n  }\r\n\r\n  @autobind\r\n  private _onToggleSelectGroupClick(ev: React.MouseEvent<HTMLElement>) {\r\n    let { onToggleSelectGroup, group } = this.props;\r\n\r\n    if (onToggleSelectGroup) {\r\n      onToggleSelectGroup(group);\r\n    }\r\n\r\n    ev.preventDefault();\r\n    ev.stopPropagation();\r\n  }\r\n\r\n  @autobind\r\n  private _onHeaderClick() {\r\n    let { group, onGroupHeaderClick, onToggleSelectGroup } = this.props;\r\n\r\n    if (onGroupHeaderClick) {\r\n      onGroupHeaderClick(group);\r\n    } else if (onToggleSelectGroup) {\r\n      onToggleSelectGroup(group);\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"..\\..\\..\\src"}