/**
 * @copyright Microsoft Corporation. All rights reserved.
 *
 * @file manifestsFile.ts
 */
"use strict";
var url = require("url");
var manifestsArray = require('manifests!');
/**
 * Get the manifest array with each of the base URLs rewritten to point to the local
 *  page's protocol, hostname, and port. This function is useful for automated tests
 *  that run locally and use an unpredictable port.
 */
function getLocalPageManifests() {
    // Clone manifestsArray
    var manifests = JSON.parse(JSON.stringify(manifestsArray));
    manifests.forEach(function (manifest) {
        var baseUrls = manifest.loaderConfig.internalModuleBaseUrls;
        var baseUrl = url.parse(baseUrls[0]);
        var pageUrl = url.parse(window.location.toString());
        baseUrl.protocol = pageUrl.protocol;
        baseUrl.host = pageUrl.host;
        baseUrls[0] = url.format(baseUrl);
    });
    return manifests;
}
exports.getLocalPageManifests = getLocalPageManifests;
/**
 * Get the manifest array.
 */
function getManifests() {
    return manifestsArray;
}
exports.getManifests = getManifests;

//# sourceMappingURL=manifestsFile.js.map
